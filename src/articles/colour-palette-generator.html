---
description: Handy tool to extract colours from an image and create a colour palette.
date: 2024-01-25
image: https://res.cloudinary.com/dhcgic4ld/image/upload/c_crop,h_680,w_900,x_141,y_255/c_scale,h_681,w_909/v1705313373/788.png
banner: 
categories:
  - Tool
layout: page
author: Matt Kevan
title: Colour palette generator
tags:
  - Article
---
<div class="border border-[#000] grid grid-cols-1 items-start lg:grid-cols-3">
  <div class="grid grid-cols-1 gap-4 lg:col-span-2 p-6 h-full border-b lg:border-b-0 lg:border-r border-[#000] "  style="background-image: url('/images/patterns/19.svg');">
    
<div class="flex items-center justify-center w-full" id="dropzone">
  <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-80 border-2 border-[#000] border-dashed cursor-pointer bg-white p-6">
      <div class="flex flex-col items-center justify-center pt-5 h-full pb-6">
          <svg class="w-8 h-8 mb-4 text-[#000]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
          </svg>
          <p class="mb-2 text-sm text-[#000]"><span class="font-semibold">Click to upload</span> or drag and drop an image.</p>
          <p class="text-xs text-[#000]">PNG, JPG or GIF, max. file size 2mb.</p>
      </div>
      <input id="dropzone-file" type="file" class="hidden" />
  </label>
</div> 
<div id="canvasContainer" class="relative" style="display: none;">
<button id="removeBtn" class="absolute top-6 right-6 bg-white hover:bg-[#000] hover:text-white text-[#000] p-4 border border-[#000]" style="display: none;">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
  </svg>
</button>
    <canvas id="canvas" class="border border-[#000] bg-white" style="width: 100%; margin: auto;"></canvas>
  </div>
  </div>
  <div class="grid grid-cols-1 gap-4 p-6">
    <label>Number of colours</label>
    <input type="range" id="colourCount" min="4" max="10" value="6" class="w-full bg-transparent cursor-pointer appearance-none disabled:opacity-50 disabled:pointer-events-none focus:outline-none
    [&::-webkit-slider-thumb]:w-4
    [&::-webkit-slider-thumb]:h-4
    [&::-webkit-slider-thumb]:-mt-1
    [&::-webkit-slider-thumb]:appearance-none
    [&::-webkit-slider-thumb]:bg-white
    [&::-webkit-slider-thumb]:shadow-[0_0_0_1px_rgba(0,0,0,2)]
    [&::-webkit-slider-thumb]:rounded-full
    [&::-webkit-slider-thumb]:transition-all
    [&::-webkit-slider-thumb]:duration-150
    [&::-webkit-slider-thumb]:ease-in-out
    
    [&::-moz-range-thumb]:w-2.5
    [&::-moz-range-thumb]:h-2.5
    [&::-moz-range-thumb]:appearance-none
    [&::-moz-range-thumb]:bg-white
    [&::-moz-range-thumb]:border-4
    [&::-moz-range-thumb]:border-[#000]
    [&::-moz-range-thumb]:rounded-full
    [&::-moz-range-thumb]:transition-all
    [&::-moz-range-thumb]:duration-150
    [&::-moz-range-thumb]:ease-in-out
    
    [&::-webkit-slider-runnable-track]:w-full
    [&::-webkit-slider-runnable-track]:h-2
    [&::-webkit-slider-runnable-track]:border
    [&::-webkit-slider-runnable-track]:border-[#000]
    [&::-webkit-slider-runnable-track]:bg-[#000]
    
    [&::-moz-range-track]:w-full
    [&::-moz-range-track]:h-2
    [&::-moz-range-track]:bg-[#000]
    ">
    <label>Palette</label>
   
    <input type="range" id="roundingFactor" min="20" max="140" value="60" class="w-full bg-transparent cursor-pointer appearance-none disabled:opacity-50 disabled:pointer-events-none focus:outline-none
    [&::-webkit-slider-thumb]:w-4
    [&::-webkit-slider-thumb]:h-4
    [&::-webkit-slider-thumb]:-mt-1
    [&::-webkit-slider-thumb]:appearance-none
    [&::-webkit-slider-thumb]:bg-white
    [&::-webkit-slider-thumb]:shadow-[0_0_0_1px_rgba(0,0,0,2)]
    [&::-webkit-slider-thumb]:rounded-full
    [&::-webkit-slider-thumb]:transition-all
    [&::-webkit-slider-thumb]:duration-150
    [&::-webkit-slider-thumb]:ease-in-out
    
    [&::-moz-range-thumb]:w-2.5
    [&::-moz-range-thumb]:h-2.5
    [&::-moz-range-thumb]:appearance-none
    [&::-moz-range-thumb]:bg-white
    [&::-moz-range-thumb]:border-4
    [&::-moz-range-thumb]:border-[#000]
    [&::-moz-range-thumb]:rounded-full
    [&::-moz-range-thumb]:transition-all
    [&::-moz-range-thumb]:duration-150
    [&::-moz-range-thumb]:ease-in-out
    
    [&::-webkit-slider-runnable-track]:w-full
    [&::-webkit-slider-runnable-track]:h-2
    [&::-webkit-slider-runnable-track]:border
    [&::-webkit-slider-runnable-track]:border-[#000]
    [&::-webkit-slider-runnable-track]:bg-[#000]
    
    [&::-moz-range-track]:w-full
    [&::-moz-range-track]:h-2
    [&::-moz-range-track]:bg-[#000]
    ">

  



    <div id="colours" class=" mt-6 pt-6 border-t border-[#000]"></div>

  </div>
  </div>
  
  <script>
    // Set the default values
    let imageData = null;
    let roundingFactor = 60; 
    let numberOfColours = 6; 

    // Set the event listerners - these look for a change in the selected element and runs a function when the change is detected
    document.getElementById('dropzone-file').addEventListener('change', handleImageChange);
    document.getElementById('colourCount').addEventListener('input', function() {
        // sets numberOfColours to the value of the range
        numberOfColours = parseInt(this.value);
        updateColourDisplay();
    });
    document.getElementById('roundingFactor').addEventListener('input', function() {
        roundingFactor = parseInt(this.value);
        updateColourDisplay();
    });
    document.getElementById('removeBtn').addEventListener('click', resetAndShowDropzone);
    
    const dropzone = document.getElementById('dropzone');
    dropzone.addEventListener('dragover', function(e) {
        e.preventDefault();
    });
    dropzone.addEventListener('drop', function(e) {
        e.preventDefault();
        if (e.dataTransfer.files.length) {
            document.getElementById('dropzone-file').files = e.dataTransfer.files;
            handleImageChange({ target: { files: e.dataTransfer.files } });
        }
    });

    function handleImageChange(event) {
        const file = event.target.files[0];
        if (file.size > 2097152) {
          alert("Image is too big. Maximum size is 2MB.");
          return;
      }

        const reader = new FileReader();
    
        reader.onload = function(e) {
            const img = new Image();
            img.onload = function() {
                const canvas = document.getElementById('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);
                
                imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                processImage();
    
                document.getElementById('dropzone').style.display = 'none';
                document.getElementById('canvasContainer').style.display = 'block';
                document.getElementById('removeBtn').style.display = 'block';
            };
            
            img.src = e.target.result;
        };
        
        reader.readAsDataURL(file);
    }
    
    function resetAndShowDropzone() {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
  
        imageData = null;
  
        document.getElementById('colourCount').value = 6;
        document.getElementById('roundingFactor').value = 60;
        numberOfColours = 6;
        roundingFactor = 60;
  
        document.getElementById('colours').innerHTML = '';
  
        document.getElementById('dropzone').style.display = 'block';
        document.getElementById('canvasContainer').style.display = 'none';
        document.getElementById('removeBtn').style.display = 'none';
    }
    
    function updateColourDisplay() {
        processImage();
    }
  
    function processImage() {
        if (!imageData) return;
    
        const data = imageData.data;
        let colourCount = {};
    
        for (let i = 0; i < data.length; i += 4) {
            const r = Math.round(data[i] / roundingFactor) * roundingFactor;
            const g = Math.round(data[i + 1] / roundingFactor) * roundingFactor;
            const b = Math.round(data[i + 2] / roundingFactor) * roundingFactor;
            const key = `${r},${g},${b}`;
    
            if (!colourCount[key]) {
                colourCount[key] = { colour: [r, g, b], count: 0 };
            }
            colourCount[key].count++;
        }
    
        const groupedColours = Object.values(colourCount);
        groupedColours.sort((a, b) => b.count - a.count);
    
        const topColours = groupedColours.slice(0, numberOfColours).map(c => {
            const colour = c.colour;
            return '#' + colour.map(v => Math.min(v, 255).toString(16).padStart(2, '0')).join('');
        });
    
        const coloursDiv = document.getElementById('colours');
        coloursDiv.innerHTML = '';
        topColours.forEach(hex => {
            coloursDiv.innerHTML += `
            <div class="flex-shrink-0 group block mb-3">
              <div class="flex items-center">
                <span class="inline-flex items-center justify-center h-[2.875rem] w-[2.875rem] rounded-full text-lg font-semibold text-white leading-none border border-gray-100" style="background-color: ${hex};"></span>
                <div class="ms-3">
                  <p class="text-gray-800">${hex}</p>
                </div>
              </div>
            </div>
          `;
        });
    }
</script>

  